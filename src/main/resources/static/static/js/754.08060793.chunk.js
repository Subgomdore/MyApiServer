"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[754],{754:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var s=r(43),i=r(213);var a=r(579);const c=function(e){let{searchTerm:t,handleSearch:r,selectedMarket:s,handleMarketFilter:i}=e;return(0,a.jsxs)("div",{className:"search-and-buttons",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>alert("\uc5b4\ud734 \ubc14\ubcf4 \u3149\u3149"),children:"\ub204\ub974\uba74 \ubc14\ubcf4"}),(0,a.jsx)("button",{onClick:()=>alert("\ub098\ud63c\uc790 \ub178\ub294\uc911"),children:"\uc5ec\uae30\ub2e4 \ubb34\uc2a8\uae30\ub2a5\ub2ec\uc9c0"}),(0,a.jsx)("button",{onClick:()=>alert("Button 3 Clicked!"),children:"Button 3"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by Korean Name...",value:t,onChange:r}),(0,a.jsxs)("select",{value:s,onChange:i,children:[(0,a.jsx)("option",{value:"all",children:"All Markets"}),(0,a.jsx)("option",{value:"krw",children:"KRW Market"}),(0,a.jsx)("option",{value:"btc",children:"BTC Market"}),(0,a.jsx)("option",{value:"usdt",children:"USDT Market"})]})]})]})};const n=function(e){let{title:t,items:r,btcPrice:s}=e;return(0,a.jsxs)("div",{className:"market-list",children:[(0,a.jsxs)("h3",{children:[t," : ",r.length," \ud56d\ubaa9"]}),r.map(((e,r)=>(0,a.jsxs)("div",{className:`market-item ${e.priceChangeClass}`,children:[(0,a.jsxs)("div",{className:"market-name",children:[e.korean_name," (",e.english_name,")"]}),(0,a.jsx)("div",{className:"market-code",children:e.market}),(0,a.jsxs)("div",{className:"market-price",children:[e.price?e.price+("KRW Market"===t?" \uc6d0":""):"Price not available","BTC Market"===t&&(0,a.jsx)("div",{style:{fontSize:"10px",color:"midnightblue"},children:(s*e.price).toLocaleString()})]})]},r)))]})};const l=function(){const[e,t]=(0,s.useState)(""),[r,l]=(0,s.useState)("all"),[o,d]=(0,s.useState)({krwList:[],btcList:[],usdtList:[]}),[h,p]=(0,s.useState)(0);(0,s.useEffect)((()=>{(async()=>{const e=await(async()=>{try{return(await i.A.get("/api/upbit/priceList")).data}catch(e){throw console.error("Failed to fetch Upbit list:",e),e}})();k(e)})()}),[e,r]),(0,s.useEffect)((()=>{const e=new EventSource(`${window.location.origin}/api/sse/price`),t=setInterval((()=>{fetch(`${window.location.origin}/api/sse/ping`).catch(console.error)}),1e4);return e.addEventListener("price",(e=>{const t=JSON.parse(e.data);"KRW-BTC"===t.code&&p(t.trade_price),v(t)})),()=>{e.close(),clearInterval(t)}}),[]);const u=e=>{let t=Number(e);return t>1e3?Math.floor(t).toLocaleString():t<=1e3&&t>1?t.toFixed(1).toString():t<1?Number(t.toFixed(10)).toString().replace(/\.0+$/,""):"Price not available"},k=e=>{let t=[],r=[],s=[];const{COIN:i,PRICE:a}=e;for(let c in i){const e=i[c].market,n=a.find((t=>t.market===e));n&&(i[c].price=u(n.trade_price),i[c].prev_closing_price=u(n.prev_closing_price),i[c].priceChangeClass=x(n.trade_price,n.prev_closing_price),"KRW-BTC"===e&&p(i[c].price)),m(i[c],e)&&(e.startsWith("KRW-")?t.push(i[c]):e.startsWith("BTC-")?r.push(i[c]):s.push(i[c]))}d({krwList:t,btcList:r,usdtList:s})},m=(t,s)=>t.korean_name.toLowerCase().includes(e)&&("all"===r||"krw"===r&&s.startsWith("KRW-")||"btc"===r&&s.startsWith("BTC-")||"usdt"===r&&s.startsWith("USDT-")),v=e=>{d((t=>{const r=t.krwList.map((t=>{if(t.market===e.code){const r=Number(t.price),s=Number(e.trade_price),i=s>r?"price-up change":"price-down change";return setTimeout((()=>{d((t=>({...t,krwList:t.krwList.map((t=>t.market===e.code?{...t,priceChangeClass:i.replace(" change","")}:t))})))}),300),{...t,price:u(s),priceChangeClass:i}}return t}));return{...t,krwList:r}}))},x=(e,t)=>e>t?"price-up":e<t?"price-down":"price-stable";return(0,a.jsxs)("div",{children:[(0,a.jsx)(c,{searchTerm:e,handleSearch:e=>t(e.target.value.toLowerCase()),selectedMarket:r,handleMarketFilter:e=>l(e.target.value)}),(0,a.jsxs)("div",{className:"market-lists",children:[(0,a.jsx)(n,{title:"KRW Market",items:o.krwList,btcPrice:h}),(0,a.jsx)(n,{title:"BTC Market",items:o.btcList,btcPrice:h}),(0,a.jsx)(n,{title:"USDT Market",items:o.usdtList,btcPrice:h})]})]})}}}]);
//# sourceMappingURL=754.08060793.chunk.js.map