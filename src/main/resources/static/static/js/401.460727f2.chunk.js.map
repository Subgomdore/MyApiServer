{"version":3,"file":"static/js/401.460727f2.chunk.js","mappings":"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","sources":["pages/upbit/UpbitMainPage.js","api/Api.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {getUpbitList} from '../../api/Api';\r\nimport '../../layouts/css/UpbitMainPage.css';\r\n\r\nfunction UpbitMainPage() {\r\n    const [serverData, setServerData] = useState('');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedMarket, setSelectedMarket] = useState('all'); // 필터 상태 추가\r\n    const [filteredData, setFilteredData] = useState({krwList: [], btcList: [], usdtList: []});\r\n    const [priceData, setPriceData] = useState({});\r\n\r\n    useEffect(() => {\r\n        getUpbitList().then(data => {\r\n            setServerData(data);\r\n            filterData(data, searchTerm, selectedMarket);\r\n        });\r\n    }, [searchTerm, selectedMarket]); // 검색어와 필터가 변경될 때마다 실행\r\n\r\n    /*\r\n        Upbit API < (WebSoket) > APISERVER -> React 실시간 데이터 스트림\r\n     */\r\n    useEffect(() => {\r\n        console.log(\"전체 URL:\", window.location.href);        // 전체 URL: http://example.com:8080/pathname?search=test#hash\r\n        console.log(\"프로토콜:\", window.location.protocol);    // 프로토콜: http:\r\n        console.log(\"호스트:\", window.location.host);          // 호스트: example.com:8080\r\n        console.log(\"호스트네임:\", window.location.hostname);  // 호스트네임: example.com\r\n        console.log(\"포트:\", window.location.port);            // 포트: 8080\r\n        console.log(\"경로명:\", window.location.pathname);      // 경로명: /pathname\r\n        console.log(\"쿼리:\", window.location.search);          // 쿼리: ?search=test\r\n        console.log(\"해시:\", window.location.hash);\r\n        const url = window.location.protocol + '//' + window.location.host;\r\n        console.log(\"SSE 연결주소: \", url);\r\n        const eventSource = new EventSource(url + '/api/sse/price');\r\n\r\n\r\n        eventSource.addEventListener(\"price\", (event) => {\r\n            const parsedData = JSON.parse(event.data);\r\n            setPriceData(prevData => ({\r\n                ...prevData,\r\n                [parsedData.code]: parsedData.trade_price // market을 키로 해서 가격 업데이트\r\n            }));\r\n        });\r\n\r\n        return () => {\r\n            console.log(\"Closing SSE connection\");\r\n            eventSource.close();\r\n        };\r\n    }, []);\r\n\r\n\r\n    const handleSearch = (e) => {\r\n        const search = e.target.value.toLowerCase();\r\n        setSearchTerm(search);\r\n        filterData(serverData, search, selectedMarket);\r\n    };\r\n\r\n    const handleMarketFilter = (e) => {\r\n        const market = e.target.value;\r\n        setSelectedMarket(market);\r\n        filterData(serverData, searchTerm, market);\r\n    };\r\n\r\n    const filterData = (data, search, market) => {\r\n        let krwList = [];\r\n        let btcList = [];\r\n        let usdtList = [];\r\n\r\n        for (let key in data) {\r\n            const marketKey = data[key].market;\r\n            if (\r\n                marketKey.startsWith('KRW-') &&\r\n                data[key].korean_name.toLowerCase().includes(search) &&\r\n                (market === 'all' || market === 'krw')\r\n            ) {\r\n                krwList.push(data[key]);\r\n            } else if (\r\n                marketKey.startsWith('BTC-') &&\r\n                data[key].korean_name.toLowerCase().includes(search) &&\r\n                (market === 'all' || market === 'btc')\r\n            ) {\r\n                btcList.push(data[key]);\r\n            } else if (\r\n                data[key].korean_name.toLowerCase().includes(search) &&\r\n                (market === 'all' || market === 'usdt')\r\n            ) {\r\n                usdtList.push(data[key]);\r\n            }\r\n        }\r\n        setFilteredData({krwList, btcList, usdtList});\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/* 상단 버튼 및 검색바, 필터 */}\r\n            <div className=\"search-and-buttons\">\r\n                <div>\r\n                    <button onClick={() => alert('Button 1 Clicked!')}>Button 1</button>\r\n                    <button onClick={() => alert('Button 2 Clicked!')}>Button 2</button>\r\n                    <button onClick={() => alert('Button 3 Clicked!')}>Button 3</button>\r\n                </div>\r\n                <div style={{display: 'flex', alignItems: 'center'}}>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search by Korean Name...\"\r\n                        value={searchTerm}\r\n                        onChange={handleSearch}\r\n                    />\r\n                    {/* 필터 추가 */}\r\n                    <select value={selectedMarket} onChange={handleMarketFilter}>\r\n                        <option value=\"all\">All Markets</option>\r\n                        <option value=\"krw\">KRW Market</option>\r\n                        <option value=\"btc\">BTC Market</option>\r\n                        <option value=\"usdt\">USDT Market</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"market-lists\">\r\n                {/* KRW List (좌측) */}\r\n                <div className=\"market-list\">\r\n                    <h3>KRW Market : {filteredData.krwList.length} 항목</h3>\r\n                    {filteredData.krwList.map((item, index) => (\r\n                        <div key={index} className=\"market-item\">\r\n                            <div>{item.korean_name} ({item.english_name})</div>\r\n                            <div>{item.market}</div>\r\n                            <div>{priceData && priceData[item.market] ? priceData[item.market].toLocaleString() : 'Price not available'}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* BTC List (중앙) */}\r\n                <div className=\"market-list\">\r\n                    <h3>BTC Market : {filteredData.btcList.length} 항목</h3>\r\n                    {filteredData.btcList.map((item, index) => (\r\n                        <div key={index} className=\"market-item\">\r\n                            <div>{item.korean_name} ({item.english_name})</div>\r\n                            <div>{item.market}</div>\r\n                            <div>{priceData && priceData[item.market] ? priceData[item.market] : 'Price not available'}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* USDT List (우측) */}\r\n                <div className=\"market-list\">\r\n                    <h3>USDT Market : {filteredData.usdtList.length} 항목</h3>\r\n                    {filteredData.usdtList.map((item, index) => (\r\n                        <div key={index} className=\"market-item\">\r\n                            <div>{item.korean_name} ({item.english_name})</div>\r\n                            <div>{item.market}</div>\r\n                            <div>{priceData && priceData[item.market] ? priceData[item.market].toLocaleString() : 'Price not available'}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default UpbitMainPage;\r\n","import axios from 'axios';\r\n\r\n// Upbit 리스트를 가져오는 API\r\nexport const getUpbitList = async () => {\r\n    try {\r\n        const res = await axios.get('/api/upbit/list');\r\n        return res.data;\r\n    } catch (error) {\r\n        console.error('Failed to fetch Upbit list:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Upbit 데이터를 가져와서 동기화하는 API\r\nexport const fetchAndSync = async () => {\r\n    try {\r\n        const res = await axios.get('/api/upbit/fetchAndSync');\r\n        return res.data;\r\n    } catch (error) {\r\n        console.error('Failed to fetch and sync data:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const fetchPriceAndSync = async () => {\r\n    try {\r\n        const res = await axios.get('/api/upbit/pricesync');\r\n        return res.data;\r\n    } catch (error) {\r\n        console.error('Failed to fetch and sync data:', error);\r\n        throw error;\r\n    }\r\n};"],"names":["serverData","setServerData","useState","searchTerm","setSearchTerm","selectedMarket","setSelectedMarket","filteredData","setFilteredData","krwList","btcList","usdtList","priceData","setPriceData","useEffect","async","axios","get","data","error","console","getUpbitList","then","filterData","log","window","location","href","protocol","host","hostname","port","pathname","search","hash","url","eventSource","EventSource","addEventListener","event","parsedData","JSON","parse","prevData","code","trade_price","close","market","key","marketKey","startsWith","korean_name","toLowerCase","includes","push","_jsxs","children","className","_jsx","onClick","alert","style","display","alignItems","type","placeholder","value","onChange","e","target","length","map","item","index","english_name","toLocaleString"],"sourceRoot":""}