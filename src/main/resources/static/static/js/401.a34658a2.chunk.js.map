{"version":3,"file":"static/js/401.a34658a2.chunk.js","mappings":"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","sources":["pages/upbit/UpbitMainPage.js","api/Api.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {getUpbitList} from '../../api/Api';\r\nimport '../../layouts/css/UpbitMainPage.css';\r\n\r\nfunction UpbitMainPage() {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedMarket, setSelectedMarket] = useState('all'); // 필터 상태 추가\r\n    const [filteredData, setFilteredData] = useState({krwList: [], btcList: [], usdtList: []});\r\n    const [priceData, setPriceData] = useState({});\r\n    const [btcPrice, setBtcPrice] = useState(0);\r\n\r\n    useEffect(() => {\r\n        getUpbitList().then(data => {\r\n            filterData(data, searchTerm, selectedMarket);\r\n        });\r\n    }, [searchTerm, selectedMarket]); // 검색어와 필터가 변경될 때마다 실행\r\n\r\n    // useEffect(() => {\r\n    //     const url = window.location.protocol + '//' + window.location.host;\r\n    //     const eventSource = new EventSource(url + '/api/sse/price');\r\n    //\r\n    //     eventSource.addEventListener(\"price\", (event) => {\r\n    //         let parsedData = JSON.parse(event.data);\r\n    //\r\n    //         // 현재 BTC 가격을 추출하여 상태로 저장\r\n    //         if (parsedData.code === 'KRW-BTC') {\r\n    //             setBtcPrice(parsedData.trade_price); // BTC 가격 상태로 저장\r\n    //         }\r\n    //\r\n    //         // 가격을 형식에 맞게 처리 (소수점 뒤 0 제거)\r\n    //         const number = parsedData.trade_price.toFixed(10);\r\n    //         const formattedNum = number.replace(/\\.?0+$/, '');\r\n    //\r\n    //         // priceData 상태 업데이트\r\n    //         setPriceData(prevData => ({\r\n    //             ...prevData,\r\n    //             [parsedData.code]: formattedNum // 각 시장의 가격 업데이트\r\n    //         }));\r\n    //     });\r\n    //\r\n    //     return () => {\r\n    //         console.log(\"Closing SSE connection\");\r\n    //         eventSource.close();\r\n    //     };\r\n    // }, []);\r\n\r\n    const handleSearch = (e) => {\r\n        const search = e.target.value.toLowerCase();\r\n        setSearchTerm(search);\r\n        filterData(filteredData, search, selectedMarket);\r\n    };\r\n\r\n    const handleMarketFilter = (e) => {\r\n        const market = e.target.value;\r\n        setSelectedMarket(market);\r\n        filterData(filteredData, searchTerm, market);\r\n    };\r\n\r\n    const filterData = (allData, search, market) => {\r\n        let krwList = [];\r\n        let btcList = [];\r\n        let usdtList = [];\r\n\r\n        const data = allData['COIN'];\r\n        const priceList = allData['PRICE'];\r\n\r\n        debugger\r\n\r\n        for (let key in data) {\r\n            const marketKey = data[key].market;\r\n            for (let key2 in priceList) {\r\n                if (priceList[key2].market === marketKey) {\r\n                    let num = Number(priceList[key2].trade_price).toFixed(10);\r\n                    let convertNum = num.replace(/\\.?0+$/, '');\r\n                    data[key].price = convertNum;\r\n                }\r\n            }\r\n\r\n            if (marketKey.startsWith('KRW-') && data[key].korean_name.toLowerCase().includes(search) && (market === 'all' || market === 'krw')) {\r\n                krwList.push(data[key]);\r\n            } else if (marketKey.startsWith('BTC-') && data[key].korean_name.toLowerCase().includes(search) && (market === 'all' || market === 'btc')) {\r\n                btcList.push(data[key]);\r\n            } else if (data[key].korean_name.toLowerCase().includes(search) && (market === 'all' || market === 'usdt')) {\r\n                usdtList.push(data[key]);\r\n            }\r\n        }\r\n        console.log(krwList)\r\n        setFilteredData({krwList, btcList, usdtList});\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/* 상단 버튼 및 검색바, 필터 */}\r\n            <div className=\"search-and-buttons\">\r\n                <div>\r\n                    <button onClick={() => alert('Button 1 Clicked!')}>Button 1</button>\r\n                    <button onClick={() => alert('Button 2 Clicked!')}>Button 2</button>\r\n                    <button onClick={() => alert('Button 3 Clicked!')}>Button 3</button>\r\n                </div>\r\n                <div style={{display: 'flex', alignItems: 'center'}}>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search by Korean Name...\"\r\n                        value={searchTerm}\r\n                        onChange={handleSearch}\r\n                    />\r\n                    {/* 필터 추가 */}\r\n                    <select value={selectedMarket} onChange={handleMarketFilter}>\r\n                        <option value=\"all\">All Markets</option>\r\n                        <option value=\"krw\">KRW Market</option>\r\n                        <option value=\"btc\">BTC Market</option>\r\n                        <option value=\"usdt\">USDT Market</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"market-lists\">\r\n                {/* KRW List (좌측) */}\r\n                <div className=\"market-list\">\r\n                    <h3>KRW Market : {filteredData.krwList.length} 항목</h3>\r\n                    {filteredData.krwList.map((item, index) => (\r\n                        <div key={index} className=\"market-item\">\r\n                            <div className=\"market-name\">{item.korean_name} ({item.english_name})</div>\r\n                            <div className=\"market-code\">{item.market}</div>\r\n                            <div\r\n                                className=\"market-price\">{item.price ? parseInt(item.price).toLocaleString() + ' 원' : 'Price not available'}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* BTC List (중앙) */}\r\n                <div className=\"market-list\">\r\n                    <h3>BTC Market : {filteredData.btcList.length} 항목</h3>\r\n                    {filteredData.btcList.map((item, index) => (\r\n                        <div key={index} className=\"market-item\">\r\n                            <div className=\"market-name\">{item.korean_name} ({item.english_name})</div>\r\n                            <div className=\"market-code\">{item.market}</div>\r\n                            <div className=\"market-price\">\r\n                                {item.price ? parseInt(item.price).toLocaleString() + ' 원' : 'Price not available'}\r\n                                <div style={{fontSize: '10px', color: 'midnightblue'}}>\r\n                                    {btcPrice && priceData[item.market] ? (btcPrice * priceData[item.market]).toLocaleString().replace(/\\..*/, '') + ' 원' : ''}\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* USDT List (우측) */}\r\n                <div className=\"market-list\">\r\n                    <h3>USDT Market : {filteredData.usdtList.length} 항목</h3>\r\n                    {filteredData.usdtList.map((item, index) => (\r\n                        <div key={index} className=\"market-item\">\r\n                            <div className=\"market-name\">{item.korean_name} ({item.english_name})</div>\r\n                            <div className=\"market-code\">{item.market}</div>\r\n                            <div\r\n                                className=\"market-price\">{priceData && priceData[item.market] ? priceData[item.market].toLocaleString() : 'Price not available'}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default UpbitMainPage;\r\n","import axios from 'axios';\r\n\r\n// Upbit 리스트를 가져오는 API\r\nexport const getUpbitList = async () => {\r\n    try {\r\n        const res = await axios.get('/api/upbit/priceList');\r\n        return res.data;\r\n    } catch (error) {\r\n        console.error('Failed to fetch Upbit list:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n\r\n// // Upbit 데이터를 가져와서 동기화하는 API\r\n// export const fetchAndSync = async () => {\r\n//     try {\r\n//         const res = await axios.get('/api/upbit/fetchAndSync');\r\n//         return res.data;\r\n//     } catch (error) {\r\n//         console.error('Failed to fetch and sync data:', error);\r\n//         throw error;\r\n//     }\r\n// };\r\n//\r\n// export const fetchPriceAndSync = async () => {\r\n//     try {\r\n//         const res = await axios.get('/api/upbit/pricesync');\r\n//         return res.data;\r\n//     } catch (error) {\r\n//         console.error('Failed to fetch and sync data:', error);\r\n//         throw error;\r\n//     }\r\n// };"],"names":["searchTerm","setSearchTerm","useState","selectedMarket","setSelectedMarket","filteredData","setFilteredData","krwList","btcList","usdtList","priceData","setPriceData","btcPrice","setBtcPrice","useEffect","async","axios","get","data","error","console","getUpbitList","then","filterData","allData","search","market","priceList","key","marketKey","key2","convertNum","Number","trade_price","toFixed","replace","price","startsWith","korean_name","toLowerCase","includes","push","log","_jsxs","children","className","_jsx","onClick","alert","style","display","alignItems","type","placeholder","value","onChange","e","target","length","map","item","index","english_name","parseInt","toLocaleString","fontSize","color"],"sourceRoot":""}