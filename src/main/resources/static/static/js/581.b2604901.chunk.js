"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[581],{424:(e,t,s)=>{s.d(t,{V:()=>c,l:()=>r});var a=s(213);const r=async()=>{try{return(await a.A.get("/api/upbit/priceList")).data}catch(e){throw console.error("Failed to fetch Upbit list:",e),e}},c=async()=>{try{return(await a.A.get("/api/upbit/filterdata")).data}catch(e){throw console.error("Failed to fetch FilterData:",e),e}}},581:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(43),r=s(424),c=s(579);const i=function(e){let{searchTerm:t,handleSearch:s,selectedMarket:r,handleMarketFilter:i,onFilterApply:n,fetchData:l}=e;const[o,d]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=e=>{e.origin===window.location.origin&&(e.data.priceRange||e.data.volume)&&n(e.data)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[n]),(0,c.jsxs)("div",{className:"search-and-buttons",children:[(0,c.jsxs)("div",{className:"button-group",children:[(0,c.jsx)("button",{className:"custom-button",onClick:()=>{window.open("http://localhost:3000/filter-popup","FilterPopup","width=800,height=600,left=300,top=200")?d(!0):alert("\ud31d\uc5c5 \ucc28\ub2e8\uc774 \ud65c\uc131\ud654\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ud31d\uc5c5 \ucc28\ub2e8\uc744 \ud574\uc81c\ud574\uc8fc\uc138\uc694.")},children:" \uac80\uc0c9\ud544\ud130 \ucd94\uac00"}),(0,c.jsx)("button",{className:"custom-button",onClick:l,children:" \ud544\ud130 \ucd08\uae30\ud654 "}),(0,c.jsx)("button",{className:"custom-button",onClick:()=>alert("Button 3 Clicked!"),children:"Button 3"})]}),(0,c.jsxs)("div",{className:"search-and-filter",children:[(0,c.jsx)("input",{type:"text",placeholder:"Search by Korean Name...",value:t,onChange:s,className:"search-input"}),(0,c.jsxs)("select",{value:r,onChange:i,className:"market-select",children:[(0,c.jsx)("option",{value:"all",children:"All Markets"}),(0,c.jsx)("option",{value:"krw",children:"KRW Market"}),(0,c.jsx)("option",{value:"btc",children:"BTC Market"}),(0,c.jsx)("option",{value:"usdt",children:"USDT Market"})]})]})]})};const n=function(e){let{title:t,items:s,btcPrice:r,handleSortByName:i,handleSortByPrice:n}=e;const[l,o]=(0,a.useState)("asc"),[d,h]=(0,a.useState)("asc"),[p,m]=(0,a.useState)("asc");return(0,c.jsxs)("div",{className:"market-list",children:[(0,c.jsx)("div",{className:"market-list-header",children:(0,c.jsxs)("h3",{children:[t," : ",s.length," \ud56d\ubaa9"]})}),(0,c.jsxs)("div",{className:"market-items-container",children:[(0,c.jsxs)("div",{className:"market-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"10px",alignItems:"center"},children:[(0,c.jsx)("div",{className:"market-name",style:{borderRight:"1px solid #ccc",textAlign:"center"},children:(0,c.jsxs)("button",{className:`sort-button ${l}`,onClick:()=>{const e="asc"===l?"desc":"asc";o(e),i(e)},children:["\uc774\ub984 \uc815\ub82c (","asc"===l?"\u25b2":"\u25bc",")"]})}),(0,c.jsx)("div",{className:"market-code",style:{borderRight:"1px solid #ccc",textAlign:"center"},children:(0,c.jsxs)("button",{className:`sort-button ${d}`,onClick:()=>{const e="asc"===d?"desc":"asc";h(e),i(e)},children:["\ucf54\uc778 \uc815\ub82c (","asc"===d?"\u25b2":"\u25bc",")"]})}),(0,c.jsx)("div",{className:"market-price",style:{textAlign:"center"},children:(0,c.jsxs)("button",{className:`sort-button ${p}`,onClick:()=>{const e="asc"===p?"desc":"asc";m(e),n(e)},children:["\uac00\uaca9 \uc815\ub82c (","asc"===p?"\u25b2":"\u25bc",")"]})})]}),s.map(((e,s)=>(0,c.jsxs)("div",{className:`market-item ${e.priceChangeClass}`,style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"10px",alignItems:"center"},children:[(0,c.jsxs)("div",{className:"market-name",style:{borderRight:"1px solid #ccc",textAlign:"center"},children:[e.korean_name||"Unknown Name"," ",(0,c.jsx)("br",{}),"(",e.english_name||"Unknown Name",")"]}),(0,c.jsx)("div",{className:"market-code",style:{borderRight:"1px solid #ccc",textAlign:"center"},children:e.market||"N/A"}),(0,c.jsxs)("div",{className:"market-price",style:{textAlign:"center"},children:[e.price?e.price+("KRW Market"===t?" \uc6d0":""):"Price not available","BTC Market"===t&&e.price&&r&&(0,c.jsx)("div",{style:{fontSize:"10px"},children:(r*parseFloat(e.price)).toLocaleString()+" \uc6d0"})]})]},s)))]})]})};const l=function(){const[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)("all"),[o,d]=(0,a.useState)({krwList:[],btcList:[],usdtList:[]}),[h,p]=(0,a.useState)(0),[m,u]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{const e=await(0,r.l)();g(e)})()}),[e,s]),(0,a.useEffect)((()=>{const e=new EventSource(`${window.location.origin}/api/sse/price`),t=setInterval((()=>{fetch(`${window.location.origin}/api/sse/ping`).catch(console.error)}),1e4);return e.addEventListener("price",(e=>{const t=JSON.parse(e.data);"KRW-BTC"===t.market&&p(t.trade_price),v(t)})),()=>{e.close(),clearInterval(t)}}),[]);const k=(e,t)=>{d((s=>({...s,[e]:[...s[e]].sort(((e,s)=>"asc"===t?e.korean_name.localeCompare(s.korean_name):s.korean_name.localeCompare(e.korean_name)))})))},x=(e,t)=>{d((s=>({...s,[e]:[...s[e]].sort(((e,s)=>"asc"===t?parseFloat(e.trade_price)-parseFloat(s.trade_price):parseFloat(s.trade_price)-parseFloat(e.trade_price)))})))},g=e=>{let t=[],s=[],a=[];e.forEach((e=>{const r=e.market,c=e.trade_price,i=e.prev_closing_price;e.price=c,e.prev_closing_price=i,e.priceChangeClass=w(c,i),"KRW-BTC"===r&&p(e.price),b(e,r)&&(r.startsWith("KRW-")?t.push(e):r.startsWith("BTC-")?s.push(e):r.startsWith("USDT-")&&a.push(e))})),d({krwList:t,btcList:s,usdtList:a})},b=(t,a)=>t.korean_name.toLowerCase().includes(e)&&("all"===s||"krw"===s&&a.startsWith("KRW-")||"btc"===s&&a.startsWith("BTC-")||"usdt"===s&&a.startsWith("USDT-")),v=e=>{d((t=>{const s=t.krwList.map((t=>{if(t.market===e.market){const s=Number(t.price),a=Number(e.trade_price),r=a>s?"price-up change":"price-down change";return setTimeout((()=>{d((t=>({...t,krwList:t.krwList.map((t=>t.market===e.market?{...t,priceChangeClass:r.replace(" change","")}:t))})))}),300),{...t,price:a,priceChangeClass:r}}return t}));return{...t,krwList:s}}))},w=(e,t)=>e>t?"price-up":e<t?"price-down":"price-stable";return(0,c.jsxs)("div",{children:[(0,c.jsx)(i,{searchTerm:e,handleSearch:e=>t(e.target.value.toLowerCase()),selectedMarket:s,handleMarketFilter:e=>l(e.target.value)}),(0,c.jsxs)("div",{className:"market-lists",children:[(0,c.jsx)(n,{title:"KRW Market",items:o.krwList,btcPrice:h,handleSortByName:e=>k("krwList",e),handleSortByPrice:e=>x("krwList",e)}),(0,c.jsx)(n,{title:"BTC Market",items:o.btcList,btcPrice:h,handleSortByName:e=>k("btcList",e),handleSortByPrice:e=>x("btcList",e)}),(0,c.jsx)(n,{title:"USDT Market",items:o.usdtList,btcPrice:h,handleSortByName:e=>k("usdtList",e),handleSortByPrice:e=>x("usdtList",e)})]})]})}}}]);
//# sourceMappingURL=581.b2604901.chunk.js.map