"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[754],{754:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(43),r=s(213);var c=s(579);const i=function(e){let{searchTerm:t,handleSearch:s,selectedMarket:a,handleMarketFilter:r}=e;return(0,c.jsxs)("div",{className:"search-and-buttons",children:[(0,c.jsxs)("div",{className:"button-group",children:[(0,c.jsx)("button",{className:"custom-button",onClick:()=>alert("\uc5b4\ud734 \ubc14\ubcf4 \u3149\u3149"),children:"\ub204\ub974\uba74 \ubc14\ubcf4"}),(0,c.jsx)("button",{className:"custom-button",onClick:()=>alert("\ub098\ud63c\uc790 \ub178\ub294\uc911"),children:"\uc5ec\uae30\ub2e4 \ubb34\uc2a8\uae30\ub2a5\ub2ec\uc9c0"}),(0,c.jsx)("button",{className:"custom-button",onClick:()=>alert("Button 3 Clicked!"),children:"Button 3"})]}),(0,c.jsxs)("div",{className:"search-and-filter",children:[(0,c.jsx)("input",{type:"text",placeholder:"Search by Korean Name...",value:t,onChange:s,className:"search-input"}),(0,c.jsxs)("select",{value:a,onChange:r,className:"market-select",children:[(0,c.jsx)("option",{value:"all",children:"All Markets"}),(0,c.jsx)("option",{value:"krw",children:"KRW Market"}),(0,c.jsx)("option",{value:"btc",children:"BTC Market"}),(0,c.jsx)("option",{value:"usdt",children:"USDT Market"})]})]})]})};const n=function(e){let{title:t,items:s,btcPrice:r,handleSortByName:i,handleSortByPrice:n}=e;const[l,o]=(0,a.useState)("asc"),[d,h]=(0,a.useState)("asc"),[m,p]=(0,a.useState)("asc");return(0,c.jsxs)("div",{className:"market-list",children:[(0,c.jsx)("div",{className:"market-list-header",children:(0,c.jsxs)("h3",{children:[t," : ",s.length," \ud56d\ubaa9"]})}),(0,c.jsxs)("div",{className:"market-items-container",children:[(0,c.jsxs)("div",{className:"market-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"10px",alignItems:"center"},children:[(0,c.jsx)("div",{className:"market-name",style:{borderRight:"1px solid #ccc",textAlign:"center"},children:(0,c.jsxs)("button",{className:`sort-button ${l}`,onClick:()=>{const e="asc"===l?"desc":"asc";o(e),i(e)},children:["\uc774\ub984 \uc815\ub82c (","asc"===l?"\u25b2":"\u25bc",")"]})}),(0,c.jsx)("div",{className:"market-code",style:{borderRight:"1px solid #ccc",textAlign:"center"},children:(0,c.jsxs)("button",{className:`sort-button ${d}`,onClick:()=>{const e="asc"===d?"desc":"asc";h(e),i(e)},children:["\ucf54\uc778 \uc815\ub82c (","asc"===d?"\u25b2":"\u25bc",")"]})}),(0,c.jsx)("div",{className:"market-price",style:{textAlign:"center"},children:(0,c.jsxs)("button",{className:`sort-button ${m}`,onClick:()=>{const e="asc"===m?"desc":"asc";p(e),n(e)},children:["\uac00\uaca9 \uc815\ub82c (","asc"===m?"\u25b2":"\u25bc",")"]})})]}),s.map(((e,s)=>(0,c.jsxs)("div",{className:`market-item ${e.priceChangeClass}`,style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"10px",alignItems:"center"},children:[(0,c.jsxs)("div",{className:"market-name",style:{borderRight:"1px solid #ccc",textAlign:"center"},children:[e.korean_name||"Unknown Name"," ",(0,c.jsx)("br",{}),"(",e.english_name||"Unknown Name",")"]}),(0,c.jsx)("div",{className:"market-code",style:{borderRight:"1px solid #ccc",textAlign:"center"},children:e.market||"N/A"}),(0,c.jsxs)("div",{className:"market-price",style:{textAlign:"center"},children:[e.price?e.price+("KRW Market"===t?" \uc6d0":""):"Price not available","BTC Market"===t&&e.price&&r&&(0,c.jsx)("div",{style:{fontSize:"10px"},children:(r*parseFloat(e.price)).toLocaleString()+" \uc6d0"})]})]},s)))]})]})};const l=function(){const[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)("all"),[o,d]=(0,a.useState)({krwList:[],btcList:[],usdtList:[]}),[h,m]=(0,a.useState)(0);(0,a.useEffect)((()=>{(async()=>{const e=await(async()=>{try{return(await r.A.get("/api/upbit/priceList")).data}catch(e){throw console.error("Failed to fetch Upbit list:",e),e}})();k(e)})()}),[e,s]),(0,a.useEffect)((()=>{const e=new EventSource(`${window.location.origin}/api/sse/price`),t=setInterval((()=>{fetch(`${window.location.origin}/api/sse/ping`).catch(console.error)}),1e4);return e.addEventListener("price",(e=>{const t=JSON.parse(e.data);"KRW-BTC"===t.market&&m(t.trade_price),g(t)})),()=>{e.close(),clearInterval(t)}}),[]);const p=(e,t)=>{d((s=>({...s,[e]:[...s[e]].sort(((e,s)=>"asc"===t?e.korean_name.localeCompare(s.korean_name):s.korean_name.localeCompare(e.korean_name)))})))},u=(e,t)=>{d((s=>({...s,[e]:[...s[e]].sort(((e,s)=>"asc"===t?parseFloat(e.trade_price)-parseFloat(s.trade_price):parseFloat(s.trade_price)-parseFloat(e.trade_price)))})))},k=e=>{let t=[],s=[],a=[];e.forEach((e=>{const r=e.market,c=e.trade_price,i=e.prev_closing_price;e.price=c,e.prev_closing_price=i,e.priceChangeClass=b(c,i),"KRW-BTC"===r&&m(e.price),x(e,r)&&(r.startsWith("KRW-")?t.push(e):r.startsWith("BTC-")?s.push(e):r.startsWith("USDT-")&&a.push(e))})),console.log(t),d({krwList:t,btcList:s,usdtList:a})},x=(t,a)=>t.korean_name.toLowerCase().includes(e)&&("all"===s||"krw"===s&&a.startsWith("KRW-")||"btc"===s&&a.startsWith("BTC-")||"usdt"===s&&a.startsWith("USDT-")),g=e=>{d((t=>{const s=t.krwList.map((t=>{if(t.market===e.market){const s=Number(t.price),a=Number(e.trade_price),r=a>s?"price-up change":"price-down change";return setTimeout((()=>{d((t=>({...t,krwList:t.krwList.map((t=>t.market===e.market?{...t,priceChangeClass:r.replace(" change","")}:t))})))}),300),{...t,price:a,priceChangeClass:r}}return t}));return{...t,krwList:s}}))},b=(e,t)=>e>t?"price-up":e<t?"price-down":"price-stable";return(0,c.jsxs)("div",{children:[(0,c.jsx)(i,{searchTerm:e,handleSearch:e=>t(e.target.value.toLowerCase()),selectedMarket:s,handleMarketFilter:e=>l(e.target.value)}),(0,c.jsxs)("div",{className:"market-lists",children:[(0,c.jsx)(n,{title:"KRW Market",items:o.krwList,btcPrice:h,handleSortByName:e=>p("krwList",e),handleSortByPrice:e=>u("krwList",e)}),(0,c.jsx)(n,{title:"BTC Market",items:o.btcList,btcPrice:h,handleSortByName:e=>p("btcList",e),handleSortByPrice:e=>u("btcList",e)}),(0,c.jsx)(n,{title:"USDT Market",items:o.usdtList,btcPrice:h,handleSortByName:e=>p("usdtList",e),handleSortByPrice:e=>u("usdtList",e)})]})]})}}}]);
//# sourceMappingURL=754.e65d0519.chunk.js.map